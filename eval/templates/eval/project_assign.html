{% extends 'eval/base/layout.html' %}

{% load static %}

{% block main %}

<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h2 class="h2">{{ project.name }}</h2>
</div>

<div class="container">
    <a href="{% url 'eval_index' %}" class="btn btn-info"><i class="bi-house"></i></a>

    <form action="{% url 'eval_project_cluster' project.id %}" method="post">
      {% csrf_token %}
      <div class="card mt-3 mb-3">
        <h5 class="card-header">Class Metric: Available Classes</h5>
        <div class="card-body">

          <table class="table table-striped table-hover table-sm">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Class Name</th>
                <th style="text-align: center;" scope="col">CBO</th>
                <th style="text-align: center;" scope="col">IC</th>
                <th style="text-align: center;" scope="col">OC</th>
                <th style="text-align: center;" scope="col">CAM</th>
                <th style="text-align: center;" scope="col">NCO</th>
                <th style="text-align: center;" scope="col">DIT</th>
                <th style="text-align: center;" scope="col">RFC</th>
                <th style="text-align: center;" scope="col">LOC</th>
                <th style="text-align: center;" scope="col">NCA</th>
                <th style="text-align: left;" scope="col">CLUSTER</th>
              </tr>
            </thead>
            <tbody>
              {% for sd in class_metric %}
              <tr>
                <td>{{ forloop.counter }}.</td>
                <td>{{ sd.class_name }}</td>
                <td style="text-align: center;">{{ sd.cbo }}</td>
                <td style="text-align: center;">{{ sd.ic }}</td>
                <td style="text-align: center;">{{ sd.oc }}</td>
                <td style="text-align: center;">{{ sd.cam }}</td>
                <td style="text-align: center;">{{ sd.nco }}</td>
                <td style="text-align: center;">{{ sd.dit }}</td>
                <td style="text-align: center;">{{ sd.rfc }}</td>
                <td style="text-align: center;">{{ sd.loc }}</td>
                <td style="text-align: center;">{{ sd.nca }}</td>
                <td><input type="text" name="{{sd.class_name}}" id="{{sd.class_name}}" value="{{ sd.cluster }}" /></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
            
          <!-- <table class="table table-striped table-hover table-sm">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Class Name</th>
                <th style="text-align: center;" scope="col">CBO</th>
                <th style="text-align: center;" scope="col">IC</th>
                <th style="text-align: center;" scope="col">OC</th>
                <th style="text-align: center;" scope="col">CAM</th>
                <th style="text-align: center;" scope="col">NCO</th>
                <th style="text-align: center;" scope="col">DIT</th>
                <th style="text-align: center;" scope="col">RFC</th>
                <th style="text-align: center;" scope="col">LOC</th>
                <th style="text-align: center;" scope="col">NCA</th>
                <th style="text-align: left;" scope="col">CLUSTER</th>
              </tr>
            </thead>
            <tbody>
              {% for sd in class_metric %}
              <tr>
                <td>{{ forloop.counter }}.</td>
                <td>{{ sd.class_name }}</td>
                <td style="text-align: center;">{{ sd.cbo }}</td>
                <td style="text-align: center;">{{ sd.ic }}</td>
                <td style="text-align: center;">{{ sd.oc }}</td>
                <td style="text-align: center;">{{ sd.cam }}</td>
                <td style="text-align: center;">{{ sd.nco }}</td>
                <td style="text-align: center;">{{ sd.dit }}</td>
                <td style="text-align: center;">{{ sd.rfc }}</td>
                <td style="text-align: center;">{{ sd.loc }}</td>
                <td style="text-align: center;">{{ sd.nca }}</td>
                <td><input type="text" name="{{sd.id}}" id="{{sd.id}}" /></td>
              </tr>
              {% endfor %}
            </tbody>
          </table> -->

          <button class="btn btn-danger btn-sm" type="submit">Save & Recalculate</button>
    </form>
          <!-- <a href="{% url 'eval_project_cluster' project.id %}" class="btn btn-danger btn-sm">Save & Recalculate</a> -->
          <a href="{% url 'eval_generate_ms_diagram' project.id %}" target="_blank" class="btn btn-sm btn-success">Interaction Diagram</a>
          <a href="{% url 'eval_generate_ms_radar_chart' project.id %}" target="_blank" class="btn btn-sm btn-success">Radar Chart</a>
          <br/><br/>
          <table class="table table-dark table-striped table-hover table-sm table-responsive">
            <thead>
              <tr>
                <!-- <th scope="col">#</th> -->
                <th scope="col">Microservice</th>
                <th scope="col">CBM</th>
                <th scope="col">WCBM</th>
                <th scope="col">ACBM</th>
                <th scope="col">NCAM</th>
                <th scope="col">IMC</th>
                <th scope="col">NMO</th>
                <th scope="col">TRM</th>
                <th scope="col">MLOC</th>
                <th scope="col">MNOC</th>
              </tr>
            </thead>
            <tbody>
              {% for ms in clustering_metric %}
              <tr>
                <!-- <td>{{ forloop.counter }}.</td> -->
                <td>MS-{{ ms.microservice }}</td>
                <td>{{ ms.cbm }}</td>
                <td>{{ ms.wcbm }}</td>
                <td>{{ ms.acbm }}</td>
                <td>{{ ms.ncam }}</td>
                <td>{{ ms.imc }}</td>
                <td>{{ ms.nmo }}</td>
                <td>{{ ms.trm }}</td>
                <td>{{ ms.mloc }}</td>
                <td>{{ ms.mnoc }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>

          <h3>Quality Score with TOPSIS Score</h3>
          <div class="row">
            <div class="col">
              <div class="table-responsive">
                <table class="table table-dark table-striped table-hover table-sm">
                  <thead>
                    <tr>
                      <th scope="col">Algo</th>
                      <th scope="col">CBM</th>
                      <th scope="col">WCBM</th>
                      <th scope="col">ACBM</th>
                      <th scope="col">NCAM</th>
                      <th scope="col">IMC</th>
                      <th scope="col">NMO</th>
                      <th scope="col">TRM</th>
                      <th scope="col">MLOC</th>
                      <th scope="col">MNOC</th>
                      <th scope="col">MCD</th>
                      <th scope="col">TOPSIS SCORE</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for st in scoring_median %}
                    <tr>
                      {% if st.project_id == 5 %}
                      <td>K-MEANS</td>
                      {% elif st.project_id == 2 %}
                      <td>MEAN-SHIFT</td>
                      {% elif st.project_id == 6 %}
                      <td>AGGLOMERATIVE</td>
                      {% elif st.project_id == 4 %}
                      <td>GAUSSIAN</td>
                      {% elif st.project_id == 3 %}
                      <td>LEIDEN</td>
                      {% elif st.project_id == 1 %}
                      <td>GIRVAN-NEWMAN</td>
                      {% else %}
                      <td><strong>YOUR SOLUTION</strong></td>
                      {% endif %}
        
                      <td>{{ st.cbm }}</td>
                      <td>{{ st.wcbm }}</td>
                      <td>{{ st.acbm }}</td>
                      <td>{{ st.ncam }}</td>
                      <td>{{ st.imc }}</td>
                      <td>{{ st.nmo }}</td>
                      <td>{{ st.trm }}</td>
                      <td>{{ st.mloc }}</td>
                      <td>{{ st.mnoc }}</td>
                      <td>{{ st.mcd }}</td>
                      
                      <td>{{ st.topsis_score }}</td>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
    
        </div>
      </div>


</div>

  

{% endblock %}